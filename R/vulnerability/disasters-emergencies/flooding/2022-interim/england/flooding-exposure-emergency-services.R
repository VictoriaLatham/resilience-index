library(dplyr)
library(readr)
library(osmdata)
library(sf)
library(geographr)

flood_risk_oa <- read_rds("data/vulnerability/disasters-emergencies/flooding/flood-risk-output-areas.rds")

emergency_services <- opq(england_bb, timeout = 1000) %>%
  add_osm_feature("amenity", "fire_station") %>%
  add_osm_feature("amenity", "police") %>%
  add_osm_feature("emergency", "ambulance_station") %>%
  osmdata_sf()

# Get Output Areas for each emergency service
emergency_services_oa <- 
  emergency_services$osm_points %>% 
  st_join(boundaries_oa)

emergency_services_oa %>% 
  st_drop_geometry() %>% 
  count(lsoa_code)

