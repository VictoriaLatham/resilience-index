library(readr)
library(tidyr)
library(dplyr)
library(readxl)
library(stringr)
library(geographr)

caci_demographics <-
  read_excel(
    "data/on-disk/caci/demographics.xlsx",
    skip = 10
  )

private_renters <-
  caci_demographics |>
  filter(str_detect(LSOA, "^W")) |>
  select(lsoa_code = LSOA, private_renters = `Private Renting`, num_households = `Total Households...39`) |>
  mutate(
    proportion_private_renters = private_renters / num_households
  ) |>
  select(lsoa_code, proportion_private_renters)

# Save
private_renters |>
  write_rds("data/vulnerability/disasters-emergencies/flooding/2022-interim/wales/ability-to-prepare/private-renters-lsoa.rds")