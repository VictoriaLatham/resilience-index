library(readr)
library(tidyr)
library(dplyr)
library(stringr)
library(geographr)
source("R/utils.R")

# Calculate younger population (aged 15 or younger) proportions for SOAs
younger_soa <- 
  population_soa %>% 
  filter(sex == "All") %>% 
  rename(
    num_people_under_15 = `00-15`,
    num_people = total_population
  ) %>% 
  
  mutate(proportion_under_15 = num_people_under_15 / num_people) %>% 
  
  select(soa_code, num_people, num_people_under_15, proportion_under_15)

# Save
younger_soa %>%
  write_rds("data/vulnerability/disasters-emergencies/flooding/2022-interim/northern-ireland/susceptibility/younger-population-lsoa.rds")
