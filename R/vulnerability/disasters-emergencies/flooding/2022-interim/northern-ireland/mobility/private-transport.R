library(readr)
library(tidyr)
library(dplyr)
library(readxl)
library(stringr)
library(geographr)

caci_demographics <- 
  read_excel(
    "C:/Users/040026704/British Red Cross Society/Strategic Insight and Foresight - Documents/Data/CACI/BRCS_LSOA_Up to Date Demographics_July_2021.xlsx",
    skip = 10
  )

lack_of_private_transport <- 
  caci_demographics %>% 
  filter(str_detect(LSOA, "^9")) %>% 
  select(soa_code = LSOA, no_cars = `No Cars Or Vans`, population = `Total Households...55`) %>%
  mutate(
    proportion_no_cars = no_cars / population
  ) %>% 
  select(soa_code, proportion_no_cars)

# Save
lack_of_private_transport %>%
  write_rds("data/vulnerability/disasters-emergencies/flooding/2022-interim/northern-ireland/ability-to-respond/lack-of-private-transport-lsoa.rds")

lack_of_private_transport %>%
  write_rds("data/vulnerability/disasters-emergencies/flooding/2022-interim/northern-ireland/ability-to-recover/lack-of-private-transport-lsoa.rds")
